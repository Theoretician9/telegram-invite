Telegram Invite
Автоматизированная система массовых приглашений пользователей в Telegram-канал по номерам телефонов с дашбордом, мониторингом очереди, фоновой обработкой задач (Celery), управляемая через веб-интерфейс. Деплой и обновление — только через GitHub Actions.
Все инструкции и актуальный код — только в репозитории!

Оглавление
Функции

Архитектура

Структура проекта

Основные компоненты

Деплой и обновление

Секреты и доступы

Как работать с проектом

TODO

Функции
Приглашение по номерам телефонов в Telegram-канал

Получение и обработка вебхуков (POST/GET) через /webhook

Очередь задач на Celery + Redis

Ведение статистики по статусам приглашения (успешно, неудачно, скип, отправлена ссылка)

Дашборд в виде SPA (React) с отображением статуса сервиса, длины очереди, статистики

Просмотр логов и админ-панель для управления параметрами приглашения

Автоматизация деплоя через GitHub Actions (без ручного копирования и nano)

Интеграция с MariaDB/MySQL для хранения логов и статистики

Архитектура
Frontend: Vite + React (SPA, дашборд, страницы логов и настроек)

Backend: Flask (app.py) + Celery (celery_app.py, tasks.py)

Очередь: Redis (брокер и бэкенд Celery)

База данных: MariaDB/MySQL (telegraminvi)

Веб-сервер: Nginx (SPA+API proxy+раздача конфигов)

CI/CD: GitHub Actions (шаблон .github/workflows/deploy.yml)

Деплой: Сервер Ubuntu 24.04, всё находится на сервере по SSH

Структура проекта
bash
Копировать
Редактировать
telegram-invite/
├── app.py                    # Flask backend (API, админка, вебхуки)
├── celery_app.py             # Настройки Celery
├── tasks.py                  # Celery задачи
├── requirements.txt
├── config.json               # Канал и сообщение (редактируется из админки)
├── frontend/                 # Vite + React
│   ├── src/                  # Исходники React
│   ├── public/config/        # Внешний JS-конфиг для SPA
│   ├── dist/                 # Сборка фронта
│   └── ...
├── deploy/nginx/telegram_invite.conf  # Nginx-конфиг для продакшена
├── .github/workflows/deploy.yml       # Автодеплой с GitHub Actions
├── migrations/               # SQL-миграции и структура БД (если есть)
├── README.md                 # (вы здесь!)
└── ...
Основные компоненты
Backend

Flask-приложение (порт 5000), REST API:

/api/health — статус

/api/queue_length — размер очереди Celery

/api/stats — агрегация по логам приглашений (invited, failed, link_sent, skipped, queue_length)

/logs — страница логов (через шаблон или API)

/admin — веб-форма настроек

Celery

Redis — очередь задач

invite_task — основная задача (импорт контакта, приглашение, удаление, запись результата)

Frontend

SPA на Vite+React: дашборд, логи, админка

Внешний JS-конфиг: /config/config.js

Nginx

Обслуживание SPA и внешней конфигурации

Проксирование /api/* на Flask

CI/CD

GitHub Actions (.github/workflows/deploy.yml)

Любые изменения файлов — только через репозиторий и автодеплой

Не вносим правки через nano/ручное копирование!

Деплой и обновление
Изменяем файлы только через GitHub (вносим коммит в ветку main)

GitHub Actions запускает workflow deploy.yml, который:

по SSH логинится на сервер

делает git pull origin main

обновляет зависимости Python

перезапускает Celery и Flask сервисы

собирает фронтенд (npm ci && npm run build)

обновляет Nginx-конфиг (копирует, делает symlink, reload)

Статус можно отслеживать на вкладке Actions в GitHub

Секреты и доступы
Все переменные для SSH (хост, юзер, порт, приватный ключ) — через Secrets GitHub Actions

Пароли от базы и другие секреты — только через переменные окружения (.env или systemd service)

Сервер:

IP: 92.113.146.148

Пользователь: admin

Путь к проекту: /home/admin/telegram_invite/

Как работать с проектом
Редактируйте только через GitHub — не трогайте ничего напрямую на сервере.

После каждого коммита в main проверяйте автодеплой (секция Actions).

В случае ошибок деплоя — смотрите логи на сервере и логи workflow в Actions.

TODO
 Авто-обновление данных на дашборде

 Графики и отчёты по истории

 Страница логов и ошибок

 Улучшенная аналитика по аккаунтам

 Аутентификация админки и API

 Интеграция HTTPS и безопасное хранение ключей

 Подробная документация API

Контакт по вопросам: владелец репозитория или админ